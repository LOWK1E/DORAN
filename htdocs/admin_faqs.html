{% extends 'layout.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">

<div class="admin-dashboard">

  <!-- ===== Dashboard Header ===== -->
  <div class="row">
  <div class="col-md-12 mb-4 d-flex justify-content-between align-items-center">
      <h2 class="futuristic-header">Admin Dashboard - FAQs Management</h2>
      <button class="futuristic-button" onclick="location.href='/admin'" title="Back to Dashboard">
        <i class="fas fa-arrow-left me-1"></i> Back to Dashboard
      </button>
    </div>
  </div>

  <!-- ===== Two Column Layout ===== -->
  <div class="row g-4">

    <!-- Left: Add New Info -->
    <div class="col-lg-4 col-md-12">
      <div class="futuristic-card h-100">
        <div class="card border-0 card-header">
          <h3 class="card-title mb-0 futuristic-header">Add New FAQ</h3>
        </div>
        <div class="card-body">
          <form id="add-info-form" novalidate>
            <div class="mb-3">
              <label for="question" class="form-label" title="Question to be asked">
                Question <i class="fas fa-info-circle"></i>
              </label>
              <textarea class="form-control" id="question" rows="3" required placeholder="Enter question here..."></textarea>
            </div>

            <div class="mb-3">
              <label for="answer" class="form-label" title="Answer to the question">
                Answer <i class="fas fa-info-circle"></i>
              </label>
              <textarea class="form-control" id="answer" rows="5" required placeholder="Enter answer here..."></textarea>
            </div>

            <div class="mb-3">
              <label for="faq-user-type" class="form-label" title="Select who can access this FAQ">User Type <i class="fas fa-info-circle"></i></label>
              <select class="form-control" id="faq-user-type" required>
                <option value="both">Both Users and Guests</option>
                <option value="user">Users Only</option>
                <option value="guest">Guests Only</option>
              </select>
              <div class="form-text">Choose who can see this FAQ response.</div>
            </div>

            <button type="submit" class="btn btn-primary w-100 shadow-sm">
              <i class="fas fa-plus-circle me-1"></i> Add FAQ
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Right: Existing Info -->
    <div class="col-lg-8 col-md-12">
      <div class="card border-0 shadow-lg rounded-4 h-100 d-flex flex-column">
        <div class="card-header text-white">
          <h3 class="card-title mb-0 futuristic-header">Existing FAQs</h3>
        </div>

        <div class="card-body flex-grow-1 overflow-auto">
          <!-- Search -->
          <div class="mb-3 d-flex align-items-center flex-wrap gap-3">
            <input type="text" id="info-search" class="form-control" placeholder="Search FAQs..." style="max-width: 300px;">
            <select id="search-type" class="form-select" style="max-width: 150px;">
              <option value="both" selected>Both</option>
              <option value="question">Question</option>
              <option value="answer">Answer</option>
            </select>
          </div>

          <!-- Info Table -->
          <div class="table-responsive">
            <table class="table table-hover align-middle" id="info-table" style="margin-bottom: 0;">
              <thead class="table-primary sticky-top">
                <tr>
                  <th>Question</th>
                  <th>Answer</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% if info_list %}
                  {% for item in info_list %}
                  <tr data-info-id="{{ loop.index0 }}">
                    <td class="info-question">{{ item.question|safe }}</td>
                    <td class="info-answer">{{ item.answer|safe }}</td>
                    <td>
                      <button class="btn btn-sm btn-danger delete-info" data-info-id="{{ loop.index0 }}" title="Delete Info">
                        <i class="fas fa-trash-alt"></i>
                      </button>
                      <button class="btn btn-sm btn-primary edit-info" data-info-id="{{ loop.index0 }}" title="Edit Info">
                        <i class="fas fa-edit"></i>
                      </button>
                    </td>
                  </tr>
                  {% endfor %}
                {% else %}
                  <tr><td colspan="3" class="text-center">No FAQs defined yet.</td></tr>
                {% endif %}
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/admin_faqs.js') }}"></script>
{% endblock %}
